{% load static %}
<section class="portfolio-section">
<div class="flex justify-center space-x-3 mt-8 flex-wrap">
  <button data-filter="all" class="filter-btn btn-transition px-4 py-2 rounded-full border border-gray-300 bg-white text-gray-600 hover:bg-gray-100 mb-2">Todos los Proyectos</button>
  {% for cat in categories %}
    <button data-filter="{{ cat.name|lower }}" class="filter-btn btn-transition px-4 py-2 rounded-full bg-green-500 text-white font-semibold hover:bg-green-600 mb-2">{{ cat.name }}</button>
  {% endfor %}
</div>

<!-- Título -->
<div class="text-center mt-6">
  <h2 class="text-2xl font-bold text-green-600">Proyectos con Python</h2>
  <p class="text-gray-600 mt-2">Desarrollo backend robusto, análisis de datos, machine learning y automatización de procesos empresariales.</p>
</div>

<!-- Cards -->
<div id="projects" class="grid grid-cols-1 md:grid-cols-3 gap-6 px-8 md:px-1 mt-10">
  {% for project in pro %}
  <!-- Card {{ forloop.counter }} -->
  <div class="project fade opacity-100 scale-100 bg-white rounded-2xl shadow-md overflow-hidden border border-gray-200 transform transition duration-300 hover:scale-105 hover:shadow-lg" 
       data-category="{% if project.category %}{{ project.category.name|lower }}{% else %}python{% endif %}">
    
    {% if project.image %}
      <img src="{{ project.image.url }}" alt="{{ project.title }}" class="w-full h-40 object-cover">
    {% else %}
      <img src="https://img.freepik.com/foto-gratis/analisis-datos-graficos_1098-3015.jpg" alt="{{ project.title }}" class="w-full h-40 object-cover">
    {% endif %}
    
    <div class="p-5">
      <span class="px-3 py-1 text-xs font-semibold bg-green-100 text-green-600 rounded-full">
        {% if project.category %}
          {{ project.category.name }}
        {% else %}
          Python
        {% endif %}
      </span>
      <h3 class="mt-3 text-lg font-bold text-gray-800">{{ project.title }}</h3>
      <p class="text-gray-600 text-sm mt-2">{{ project.description|truncatewords:20 }}</p>
      
      <div class="mt-3 flex flex-wrap gap-1">
        {% for lenguaje in project.lenguajes %}
          <span class="px-2 py-1 text-xs bg-blue-100 text-blue-700 rounded-full">{{ lenguaje }}</span>
        {% endfor %}
      </div>
      
      <div class="mt-4 flex justify-between items-center">
        {% if project.url_demo %}
          <a href="{{ project.url_demo }}" target="_blank" class="text-blue-500 hover:text-blue-700 text-sm font-medium flex items-center">
            <svg class="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"></path>
            </svg>
            Demo
          </a>
        {% endif %}
        
        {% if project.url_repository %}
          <a href="{{ project.url_repository }}" target="_blank" class="text-gray-600 hover:text-gray-800 text-sm font-medium flex items-center">
            <svg class="w-4 h-4 mr-1" fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
              <path d="M12 0.296c-6.627 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385 0.6 0.113 0.82-0.258 0.82-0.577 0-0.285-0.011-1.04-0.015-2.04-3.338 0.724-4.042-1.61-4.042-1.61-0.546-1.385-1.335-1.755-1.335-1.755-1.087-0.745 0.084-0.729 0.084-0.729 1.205 0.084 1.838 1.236 1.838 1.236 1.07 1.835 2.807 1.305 3.495 0.998 0.108-0.776 0.417-1.305 0.76-1.605-2.665-0.303-5.467-1.332-5.467-5.93 0-1.312 0.469-2.38 1.235-3.22-0.135-0.303-0.54-1.523 0.105-3.176 0 0 1.005-0.322 3.3 1.23 0.96-0.267 1.98-0.399 3-0.405 1.02 0.006 2.04 0.138 3 0.405 2.28-1.552 3.285-1.23 3.285-1.23 0.645 1.653 0.24 2.873 0.12 3.176 0.77 0.84 1.23 1.908 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92 0.42 0.36 0.81 1.096 0.81 2.22 0 1.606-0.015 2.896-0.015 3.286 0 0.315 0.21 0.69 0.825 0.57 4.801-1.574 8.236-6.074 8.236-11.369 0-6.627-5.373-12-12-12z"></path>
            </svg>
            Repositorio
          </a>
        {% endif %}
      </div>
    </div>
  </div>
  {% empty %}
  <div class="col-span-3 text-center py-10">
    <p class="text-gray-500">No hay proyectos disponibles.</p>
  </div>
  {% endfor %}
</div>

<!-- Script Filtro con animación -->
<script type="module" src="{% static 'app/js/pc_proyectos.js' %}"></script>